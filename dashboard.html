<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WarkAI - ç”¨æˆ·ä»ªè¡¨æ¿</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646425229/hands.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.4.1646425229/drawing_utils.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.4.1646425229/camera_utils.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #00ff88;
            font-family: 'Courier New', monospace;
            overflow-x: hidden;
        }

        .dashboard-container {
            min-height: 100vh;
            padding: 20px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><defs><pattern id="grid" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="%23003300" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="%230a0e27" /><rect width="100" height="100" fill="url(%23grid)" /></svg>');
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 255, 136, 0.05);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
        }

        .header h1 {
            font-size: 28px;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .user-info {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00ff88, #00ccff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            color: #0a0e27;
        }

        .logout-btn {
            padding: 10px 20px;
            background: rgba(255, 0, 100, 0.2);
            border: 2px solid #ff0064;
            color: #ff0064;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255, 0, 100, 0.4);
            box-shadow: 0 0 15px #ff0064;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: rgba(0, 255, 136, 0.05);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.1);
            transition: all 0.3s;
        }

        .card:hover {
            background: rgba(0, 255, 136, 0.1);
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.2);
            transform: translateY(-5px);
        }

        .card h2 {
            font-size: 20px;
            margin-bottom: 15px;
            color: #00ff88;
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .chart-container {
            width: 100%;
            height: 300px;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 12px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
            border-radius: 5px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
        }

        .search-box::placeholder {
            color: rgba(0, 255, 136, 0.5);
        }

        .search-results {
            max-height: 250px;
            overflow-y: auto;
        }

        .result-item {
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(0, 255, 136, 0.1);
            border-left: 3px solid #00ff88;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .result-item:hover {
            background: rgba(0, 255, 136, 0.2);
            transform: translateX(5px);
        }

        .result-title {
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 5px;
        }

        .result-desc {
            font-size: 12px;
            color: rgba(0, 255, 136, 0.7);
        }

        .gesture-section {
            grid-column: 1 / -1;
        }

        .gesture-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .video-container {
            position: relative;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
        }

        #webcam {
            width: 100%;
            height: auto;
            transform: scaleX(-1);
        }

        .gesture-info {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 5px;
            border: 2px solid #00ff88;
        }

        .gesture-status {
            font-size: 14px;
            margin-bottom: 10px;
        }

        .gesture-action {
            font-size: 12px;
            color: #00ccff;
        }

        #gundam-canvas {
            width: 100%;
            height: 400px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }

        .data-list {
            list-style: none;
        }

        .data-item {
            padding: 10px;
            margin-bottom: 10px;
            background: rgba(0, 255, 136, 0.1);
            border-left: 3px solid #00ff88;
            border-radius: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .data-item-title {
            color: #00ff88;
            font-weight: bold;
        }

        .delete-btn {
            background: rgba(255, 0, 100, 0.2);
            border: 1px solid #ff0064;
            color: #ff0064;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            background: rgba(255, 0, 100, 0.4);
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .input-group input {
            flex: 1;
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        .input-group button {
            padding: 10px 20px;
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid #00ff88;
            color: #00ff88;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .input-group button:hover {
            background: rgba(0, 255, 136, 0.4);
            box-shadow: 0 0 15px #00ff88;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-box {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }

        .stat-label {
            font-size: 12px;
            color: rgba(0, 255, 136, 0.7);
            margin-top: 5px;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .gesture-container {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #00ff88;
        }

        .spinner {
            border: 3px solid rgba(0, 255, 136, 0.3);
            border-top: 3px solid #00ff88;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¤– WarkAI ç”¨æˆ·ä»ªè¡¨æ¿</h1>
            <div class="user-info">
                <div class="user-avatar">ğŸ‘¤</div>
                <div>
                    <div style="font-size: 14px;">æ¬¢è¿å›æ¥</div>
                    <div style="font-size: 12px; color: rgba(0, 255, 136, 0.7);">é«˜çº§é©¾é©¶å‘˜</div>
                </div>
                <button class="logout-btn" onclick="logout()">é€€å‡ºç™»å½•</button>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <div class="main-grid">
            <!-- æ•°æ®å¯è§†åŒ– -->
            <div class="card">
                <h2>ğŸ“Š æ•°æ®å¯è§†åŒ–</h2>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="stat-papers">2,847</div>
                        <div class="stat-label">ç§‘å­¦è®ºæ–‡</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="stat-favorites">156</div>
                        <div class="stat-label">æ”¶è—å¤¹</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="stat-views">12.5K</div>
                        <div class="stat-label">æµè§ˆæ¬¡æ•°</div>
                    </div>
                </div>
                <div class="chart-container">
                    <svg id="d3-chart"></svg>
                </div>
            </div>

            <!-- çŸ¥è¯†åº“æœç´¢ -->
            <div class="card">
                <h2>ğŸ” çŸ¥è¯†åº“æœç´¢</h2>
                <input type="text" class="search-box" id="search-input" placeholder="æœç´¢ç§‘å­¦è®ºæ–‡ã€èµ„æº...">
                <div class="search-results" id="search-results">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>å‡†å¤‡æœç´¢å¼•æ“...</p>
                    </div>
                </div>
            </div>

            <!-- ä¸ªäººæ•°æ®ç®¡ç† -->
            <div class="card">
                <h2>ğŸ’¾ ä¸ªäººæ•°æ®ç®¡ç†</h2>
                <div class="input-group">
                    <input type="text" id="data-input" placeholder="è¾“å…¥ç ”ç©¶å…´è¶£æˆ–æ ‡ç­¾...">
                    <button onclick="addData()">æ·»åŠ </button>
                </div>
                <ul class="data-list" id="data-list">
                    <li class="data-item">
                        <span class="data-item-title">AIä¸æœºå™¨å­¦ä¹ </span>
                        <button class="delete-btn" onclick="deleteData(this)">åˆ é™¤</button>
                    </li>
                    <li class="data-item">
                        <span class="data-item-title">äººæœºäº¤äº’</span>
                        <button class="delete-btn" onclick="deleteData(this)">åˆ é™¤</button>
                    </li>
                    <li class="data-item">
                        <span class="data-item-title">è®¡ç®—æœºè§†è§‰</span>
                        <button class="delete-btn" onclick="deleteData(this)">åˆ é™¤</button>
                    </li>
                </ul>
            </div>

            <!-- æ‰‹åŠ¿æ§åˆ¶ä¸é«˜è¾¾äº¤äº’ -->
            <div class="card gesture-section">
                <h2>ğŸ® æ‰‹åŠ¿æ§åˆ¶ & é«˜è¾¾äº¤äº’</h2>
                <div class="gesture-container">
                    <div class="video-container">
                        <video id="webcam" autoplay playsinline></video>
                        <div class="gesture-info">
                            <div class="gesture-status">
                                å·¦æ‰‹: <span id="left-hand-status">æœªæ£€æµ‹</span>
                            </div>
                            <div class="gesture-status">
                                å³æ‰‹: <span id="right-hand-status">æœªæ£€æµ‹</span>
                            </div>
                            <div class="gesture-action" id="gesture-action">
                                ç­‰å¾…æ‰‹åŠ¿...
                            </div>
                        </div>
                    </div>
                    <div>
                        <canvas id="gundam-canvas"></canvas>
                        <div style="margin-top: 10px; padding: 10px; background: rgba(0, 255, 136, 0.1); border-radius: 5px; font-size: 12px;">
                            <p>ğŸ’¡ æç¤ºï¼š</p>
                            <p>â€¢ å¼ å¼€æ‰‹æŒ = æ—‹è½¬é«˜è¾¾</p>
                            <p>â€¢ æ¡æ‹³ = ç¼©æ”¾é«˜è¾¾</p>
                            <p>â€¢ ç«–èµ·å¤§æ‹‡æŒ‡ = å˜å½¢åŠ¨ç”»</p>
                            <p>â€¢ ç‚¹å‡»"å¯åŠ¨æ‰‹åŠ¿è¯†åˆ«"å¼€å§‹</p>
                        </div>
                    </div>
                </div>
                <button onclick="toggleGestureRecognition()" style="margin-top: 15px; padding: 10px 20px; background: rgba(0, 255, 136, 0.2); border: 2px solid #00ff88; color: #00ff88; border-radius: 5px; cursor: pointer; width: 100%; font-weight: bold;">
                    ğŸ¥ å¯åŠ¨æ‰‹åŠ¿è¯†åˆ«
                </button>
            </div>
        </div>
    </div>

    <script>
        // ============ æ•°æ®å¯è§†åŒ– ============
        function initD3Chart() {
            const data = [
                { month: '1æœˆ', value: 65 },
                { month: '2æœˆ', value: 78 },
                { month: '3æœˆ', value: 90 },
                { month: '4æœˆ', value: 81 },
                { month: '5æœˆ', value: 95 },
                { month: '6æœˆ', value: 107 }
            ];

            const margin = { top: 20, right: 30, bottom: 30, left: 60 };
            const width = 400 - margin.left - margin.right;
            const height = 300 - margin.top - margin.bottom;

            const svg = d3.select('#d3-chart')
                .attr('width', width + margin.left + margin.right)
                .attr('height', height + margin.top + margin.bottom)
                .append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            const x = d3.scaleBand()
                .domain(data.map(d => d.month))
                .range([0, width])
                .padding(0.1);

            const y = d3.scaleLinear()
                .domain([0, 120])
                .range([height, 0]);

            // ç»˜åˆ¶æŸ±å­
            svg.selectAll('.bar')
                .data(data)
                .enter()
                .append('rect')
                .attr('class', 'bar')
                .attr('x', d => x(d.month))
                .attr('y', d => y(d.value))
                .attr('width', x.bandwidth())
                .attr('height', d => height - y(d.value))
                .attr('fill', '#00ff88')
                .attr('opacity', 0.7)
                .transition()
                .duration(800)
                .attr('opacity', 0.9);

            // ç»˜åˆ¶Xè½´
            svg.append('g')
                .attr('transform', `translate(0,${height})`)
                .call(d3.axisBottom(x))
                .attr('color', '#00ff88');

            // ç»˜åˆ¶Yè½´
            svg.append('g')
                .call(d3.axisLeft(y))
                .attr('color', '#00ff88');
        }

        // ============ çŸ¥è¯†åº“æœç´¢ ============
        const knowledgeBase = [
            { title: 'æ·±åº¦å­¦ä¹ åŸºç¡€', desc: 'ç¥ç»ç½‘ç»œå’Œæ·±åº¦å­¦ä¹ çš„åŸºç¡€æ¦‚å¿µ' },
            { title: 'è®¡ç®—æœºè§†è§‰è¿›é˜¶', desc: 'å›¾åƒå¤„ç†å’Œè§†è§‰è¯†åˆ«æŠ€æœ¯' },
            { title: 'è‡ªç„¶è¯­è¨€å¤„ç†', desc: 'NLPæŠ€æœ¯å’Œåº”ç”¨' },
            { title: 'å¼ºåŒ–å­¦ä¹ ', desc: 'æœºå™¨å­¦ä¹ çš„å¼ºåŒ–å­¦ä¹ åˆ†æ”¯' },
            { title: 'è¿ç§»å­¦ä¹ ', desc: 'è·¨åŸŸå­¦ä¹ å’Œæ¨¡å‹è¿ç§»' },
            { title: 'ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ', desc: 'GANæŠ€æœ¯å’Œåº”ç”¨' },
            { title: 'å›¾ç¥ç»ç½‘ç»œ', desc: 'å›¾ç»“æ„æ•°æ®å¤„ç†' },
            { title: 'æ³¨æ„åŠ›æœºåˆ¶', desc: 'Transformerå’Œæ³¨æ„åŠ›æ¨¡å‹' }
        ];

        document.getElementById('search-input').addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            const resultsContainer = document.getElementById('search-results');

            if (query.length === 0) {
                resultsContainer.innerHTML = '<div class="loading"><p>è¾“å…¥å…³é”®è¯å¼€å§‹æœç´¢...</p></div>';
                return;
            }

            const results = knowledgeBase.filter(item =>
                item.title.toLowerCase().includes(query) ||
                item.desc.toLowerCase().includes(query)
            );

            if (results.length === 0) {
                resultsContainer.innerHTML = '<div class="loading"><p>æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</p></div>';
                return;
            }

            resultsContainer.innerHTML = results.map(result => `
                <div class="result-item" onclick="selectResult('${result.title}')">
                    <div class="result-title">${result.title}</div>
                    <div class="result-desc">${result.desc}</div>
                </div>
            `).join('');
        });

        function selectResult(title) {
            alert('å·²é€‰æ‹©: ' + title + '\n\nåœ¨å®Œæ•´ç‰ˆæœ¬ä¸­ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºè¯¦ç»†çš„è®ºæ–‡å’Œèµ„æºã€‚');
        }

        // ============ ä¸ªäººæ•°æ®ç®¡ç† ============
        function addData() {
            const input = document.getElementById('data-input');
            const value = input.value.trim();

            if (value === '') {
                alert('è¯·è¾“å…¥å†…å®¹');
                return;
            }

            const list = document.getElementById('data-list');
            const item = document.createElement('li');
            item.className = 'data-item';
            item.innerHTML = `
                <span class="data-item-title">${value}</span>
                <button class="delete-btn" onclick="deleteData(this)">åˆ é™¤</button>
            `;
            list.appendChild(item);
            input.value = '';

            // æ›´æ–°ç»Ÿè®¡
            updateStats();
        }

        function deleteData(btn) {
            btn.parentElement.remove();
            updateStats();
        }

        function updateStats() {
            const itemCount = document.querySelectorAll('.data-item').length;
            document.getElementById('stat-favorites').textContent = itemCount;
        }

        // ============ æ‰‹åŠ¿è¯†åˆ«ä¸é«˜è¾¾æ§åˆ¶ ============
        let gestureEnabled = false;
        let hands = null;
        let camera = null;
        let gundamScene = null;
        let gundamMesh = null;

        async function initGestureRecognition() {
            try {
                const video = document.getElementById('webcam');
                
                // åˆå§‹åŒ–MediaPipe Hands
                hands = new Hands({
                    locateFile: (file) => {
                        return `https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1646425229/${file}`;
                    }
                });

                hands.setOptions({
                    maxNumHands: 2,
                    modelComplexity: 1,
                    minDetectionConfidence: 0.5,
                    minTrackingConfidence: 0.5
                });

                hands.onResults(onHandsResults);

                // åˆå§‹åŒ–æ‘„åƒå¤´
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { width: { ideal: 640 }, height: { ideal: 480 } }
                });
                video.srcObject = stream;

                // åˆå§‹åŒ–Three.jsé«˜è¾¾
                initGundamScene();

                // å¼€å§‹å¤„ç†
                const canvasElement = document.createElement('canvas');
                canvasElement.width = video.videoWidth;
                canvasElement.height = video.videoHeight;

                const canvasCtx = canvasElement.getContext('2d');
                
                async function processFrame() {
                    if (!gestureEnabled) return;

                    canvasCtx.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);
                    await hands.send({ image: canvasElement });
                    requestAnimationFrame(processFrame);
                }

                video.onloadedmetadata = () => {
                    processFrame();
                };

                gestureEnabled = true;
                document.querySelector('button[onclick="toggleGestureRecognition()"]').textContent = 'â¹ï¸ åœæ­¢æ‰‹åŠ¿è¯†åˆ«';
            } catch (error) {
                console.error('æ‰‹åŠ¿è¯†åˆ«åˆå§‹åŒ–å¤±è´¥:', error);
                alert('æ— æ³•è®¿é—®æ‘„åƒå¤´ï¼Œè¯·æ£€æŸ¥æƒé™è®¾ç½®');
            }
        }

        function onHandsResults(results) {
            const leftHandStatus = document.getElementById('left-hand-status');
            const rightHandStatus = document.getElementById('right-hand-status');
            const gestureAction = document.getElementById('gesture-action');

            if (results.multiHandedness && results.multiHandedness.length > 0) {
                results.multiHandedness.forEach((hand, index) => {
                    const landmarks = results.landmarks[index];
                    const handedness = hand.label;
                    const confidence = hand.score;

                    if (handedness === 'Left') {
                        leftHandStatus.textContent = `âœ“ å·²æ£€æµ‹ (${(confidence * 100).toFixed(0)}%)`;
                    } else {
                        rightHandStatus.textContent = `âœ“ å·²æ£€æµ‹ (${(confidence * 100).toFixed(0)}%)`;
                    }

                    // è¯†åˆ«æ‰‹åŠ¿
                    const gesture = recognizeGesture(landmarks);
                    gestureAction.textContent = `æ£€æµ‹åˆ°æ‰‹åŠ¿: ${gesture}`;

                    // æ§åˆ¶é«˜è¾¾
                    controlGundam(gesture);
                });
            } else {
                leftHandStatus.textContent = 'æœªæ£€æµ‹';
                rightHandStatus.textContent = 'æœªæ£€æµ‹';
                gestureAction.textContent = 'ç­‰å¾…æ‰‹åŠ¿...';
            }
        }

        function recognizeGesture(landmarks) {
            // ç®€å•çš„æ‰‹åŠ¿è¯†åˆ«é€»è¾‘
            const thumbTip = landmarks[4];
            const indexTip = landmarks[8];
            const middleTip = landmarks[12];
            const ringTip = landmarks[16];
            const pinkyTip = landmarks[20];
            const wrist = landmarks[0];

            // è®¡ç®—æ‰‹æŒ‡è·ç¦»
            const thumbToIndex = Math.hypot(
                thumbTip.x - indexTip.x,
                thumbTip.y - indexTip.y
            );

            const allFingersUp = [indexTip, middleTip, ringTip, pinkyTip].every(tip =>
                tip.y < wrist.y
            );

            if (thumbToIndex < 0.05 && allFingersUp) {
                return 'ğŸ‘ ç«–èµ·å¤§æ‹‡æŒ‡';
            } else if (thumbTip.y > wrist.y && indexTip.y > wrist.y) {
                return 'âœŠ æ¡æ‹³';
            } else if (allFingersUp) {
                return 'âœ‹ å¼ å¼€æ‰‹æŒ';
            }

            return 'â“ æœªçŸ¥æ‰‹åŠ¿';
        }

        function initGundamScene() {
            const canvas = document.getElementById('gundam-canvas');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });

            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            renderer.setClearColor(0x000000, 0.1);

            // åˆ›å»ºç®€å•çš„é«˜è¾¾å½¢çŠ¶
            const geometry = new THREE.BoxGeometry(1, 2, 0.5);
            const material = new THREE.MeshPhongMaterial({ color: 0x00ff88, emissive: 0x00ff88 });
            gundamMesh = new THREE.Mesh(geometry, material);
            scene.add(gundamMesh);

            // æ·»åŠ ç¯å…‰
            const light = new THREE.PointLight(0x00ff88, 1);
            light.position.set(5, 5, 5);
            scene.add(light);

            const ambientLight = new THREE.AmbientLight(0x0066ff, 0.5);
            scene.add(ambientLight);

            camera.position.z = 3;

            function animate() {
                requestAnimationFrame(animate);
                renderer.render(scene, camera);
            }

            animate();
            gundamScene = scene;
        }

        function controlGundam(gesture) {
            if (!gundamMesh) return;

            if (gesture.includes('å¼ å¼€')) {
                gundamMesh.rotation.y += 0.05;
                gundamMesh.rotation.x += 0.02;
            } else if (gesture.includes('æ¡æ‹³')) {
                gundamMesh.scale.x += 0.01;
                gundamMesh.scale.y += 0.01;
                gundamMesh.scale.z += 0.01;
                if (gundamMesh.scale.x > 2) {
                    gundamMesh.scale.set(1, 1, 1);
                }
            } else if (gesture.includes('ç«–èµ·')) {
                gundamMesh.position.y += 0.02;
                if (gundamMesh.position.y > 1) {
                    gundamMesh.position.y = -1;
                }
            }
        }

        function toggleGestureRecognition() {
            if (!gestureEnabled) {
                initGestureRecognition();
            } else {
                gestureEnabled = false;
                const video = document.getElementById('webcam');
                if (video.srcObject) {
                    video.srcObject.getTracks().forEach(track => track.stop());
                }
                document.querySelector('button[onclick="toggleGestureRecognition()"]').textContent = 'ğŸ¥ å¯åŠ¨æ‰‹åŠ¿è¯†åˆ«';
            }
        }

        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                window.location.href = 'index.html';
            }
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('load', function() {
            initD3Chart();
        });
    </script>
</body>
</html>
